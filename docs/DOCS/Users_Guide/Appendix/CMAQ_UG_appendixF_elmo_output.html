
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Appendix F: Explicit and Lumped Model Output (ELMO) &#8212; CMAQ_Documentation 0.2 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../_static/documentation_options.js?v=10f1778b"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'DOCS/Users_Guide/Appendix/CMAQ_UG_appendixF_elmo_output';</script>
    <link rel="canonical" href="https://jbrunto.github.io/CMAQ_Docs_v55/DOCS/Users_Guide/Appendix/CMAQ_UG_appendixF_elmo_output.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/CMAQ_Logo_2_inch.png" class="logo__image only-light" alt="CMAQ_Documentation 0.2 documentation - Home"/>
    <img src="../../../_static/CMAQ_Logo_2_inch.png" class="logo__image only-dark pst-js-only" alt="CMAQ_Documentation 0.2 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../README.html">
    CMAQ User’s Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../Tutorials/README.html">
    CMAQ Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../Developers_Guide/CMAQ_Dev_Guide.html">
    Developers’ Guide
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/USEPA/CMAQ" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../README.html">
    CMAQ User’s Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../Tutorials/README.html">
    CMAQ Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../Developers_Guide/CMAQ_Dev_Guide.html">
    Developers’ Guide
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/USEPA/CMAQ" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item">
<h3><a href="../../../index.html">Table of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">CMAQ User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorials/README.html">CMAQ Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Developers_Guide/CMAQ_Dev_Guide.html">Developers’ Guide</a></li>
</ul>
</div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Appendix F: Explicit and Lumped Model Output (ELMO)</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <!-- BEGIN COMMENT -->
<p><a class="reference internal" href="CMAQ_UG_appendixE_configuring_WRF.html"><span class="std std-doc">&lt;&lt; Previous Appendix</span></a> - <a class="reference internal" href="../README.html"><span class="std std-doc">Home</span></a></p>
<!-- END COMMENT -->
<hr class="docutils" />
<section id="appendix-f-explicit-and-lumped-model-output-elmo">
<h1>Appendix F: Explicit and Lumped Model Output (ELMO)<a class="headerlink" href="#appendix-f-explicit-and-lumped-model-output-elmo" title="Link to this heading">#</a></h1>
<p>The ELMO module makes aerosol diagnostic parameters as well as aggregated and highly processed aerosol metrics available directly in CMAQ output files rather than requiring follow-up post-processing steps.</p>
<section id="f-1-output-concentration-and-diagnostic-variables">
<h2>F.1 Output concentration and diagnostic variables<a class="headerlink" href="#f-1-output-concentration-and-diagnostic-variables" title="Link to this heading">#</a></h2>
<p>The ELMO Module streamlines the definition, calculation, and maintenance of gas and particulate concentrations, as well as over 200 aggregate and diagnostic variables, listed in Fig. 1.
With ELMO, aggregate and diagnostic variables are registered in the <a class="reference download internal" download="" href="../../../_downloads/0ef4480aa96f206254d83dab908ab112/ELMO_DATA.F"><span class="xref download myst">ELMO_DATA.F</span></a>, their calculations are prescribed in <a class="reference download internal" download="" href="../../../_downloads/92cce048801a31be54a099cd47d3779c/ELMO_PROC.F"><span class="xref download myst">ELMO_PROC.F</span></a>, and CMAQ calculates them online.
Thus, CMAQ can output higher-level parameters without needing to run any particular post-processing tool.
As a result, users may choose to limit their output to just the variables they are most interested in (perhaps just O<sub>3</sub> and PM2.5, for example). Or they may elect to output a more complex selection of scalar and aggregate variables.
Post-processing is still needed to concatenate days of output together onto monthly, seasonal, or annual files.</p>
<p><a id=FigureF-1></a> <img alt="Figure F-1" src="../../../_images/FigureF-1.png" />
<strong>Figure F-1. Comprehensive list of diagnostic and aggregate variables currently available in ELMO. The table headings are just for presentation. They are not equivalent to ELMO Keywords, which are discussed in section F.4</strong></p>
<p>Concentrations of scalar variables like NO, NO2, O3, ASO4J, and others are available for output to ELMO files as well. An aggregate variable for total VOC has not been provided for CMAQv5.4 or v5.5 because differences among chemical mechanisms are so significant. This capabality will be added in a future CMAQ version.</p>
</section>
<section id="f-2-relationship-to-previous-cmaq-versions">
<h2>F.2 Relationship to previous CMAQ versions<a class="headerlink" href="#f-2-relationship-to-previous-cmaq-versions" title="Link to this heading">#</a></h2>
<p>Previously, aggregate parameters like PM<sub>2.5</sub> and Fine-mode Sulfate (ASO4I + ASO4J) were calculated offline through the COMBINE post-processing utility and documented via the species definition (SpecDef) input file for COMBINE, as depcited in Fig. F-2.<br />
CMAQ versions 5.4 and later, maintain the CONC and ACONC files - they are available for use identically to CMAQv5.3.3. However, PMDIAG and APMDIAG files have been eliminated.</p>
<p>If a user would like to continue using the COMBINE workflow to aggregate PM variables, they may output necessary variables like FPM25ACC to ELMO files and use those with CONC output.
Alternatively, a user may elect to rely exclusively on ELMO output files alone and set the CONC_SPCS and AVG_CONC_SPCS variables in the CMAQ runscript to just one variable (e.g. O3) to minimize their I/O time and storage space footprint.</p>
<p><a id=FigureF-2></a> <img alt="Figure F-2" src="../../../_images/FigureF-2b.png" /><br />
<strong>Figure F-2. Schematic of data workflow in v5.3 and v5.4 with ELMO. (Note that v5.5 workflow is idential to v5.4.)</strong></p>
<p>There are several distinct advantages to using ELMO over post-processing CONC and ACONC output with COMBINE:</p>
<ul class="simple">
<li><p>Definitions of products like PM25 mass, PMF (Fine PM mass), and PM10 mass automatically adjust as PM species are activated or deactivated by CMAQ users or chemical mechanisms are switched. There is no need to modify a SpecDef file to account for a new or eliminated species.</p>
<ul>
<li><p>Note that some of the diagnostic species defined in FINE_ORG, specifically those meant to provide an approximate distinction between primary and secondary or anthropogenic and biogenic organic aerosols, should generally only be used in a qualitative manner.
A number of emitted compounds forming organic aerosols in the atmosphere can have both anthropogenic and biogenic sources so a quantitative attribution of organic aerosols to specific sources cannot be based on an analysis of concentrations alone and should use ISAM instead.
Moreover, their interpretation may not be consistent across mechanisms (e.g. cb6r5_aero7 vs. cracmm1) depending on the assumptions made during emissions processing and the mapping of emitted species to CMAQ mechanism species in DESID.</p></li>
</ul>
</li>
<li><p>Complex properties like O:C, OM:OC, particle acidity, etc. can be calculated using species properties available within CMAQ.
This resolves a potential vulnerability where, for example, the OM:OC of organic species may become out of sync between the SpecDef and the SOA_DEFN table within the model. This could have potentially led to errors in the calculation of OC (organic carbon). With ELMO, there is no such risk.</p></li>
<li><p>If a user is only interested in aggregate parameters like PM25 mass, they can avoid the I/O time and storage required saving the raw output of every PM variable and then post-processing with COMBINE. This can be particularly helpful when processing 3D data.</p></li>
<li><p>New parameters are available that were not before like N10, N20, N40 and N100, the number of particles above 10, 20, 40 and 100 nm in diameter. AOD and extinction at 550 nm have also been supported as options; these were previously only available on the photolysis diagnostic file.</p></li>
<li><p>Keywords are available (see section F.4) to select groups of variables of interest.</p></li>
<li><p>Variables may be added to the ELMO_LIST table in ELMO_DATA.F and then prescribed in ELMO_PROC.F with greater ease.</p></li>
</ul>
<p>ELMO has no significant quantitative impact on results, but there will be a noticeable positive impact on the time invested in post-processing aggregate PM components and storage volumes required for standard runs.
There can be some slight numerical differences realized when one compares quantities averaged directly online with ELMO vs. calculated offline using averages.
For example, total PM2.5 have some small deviations when it is calculated as the hourly average of the sum of species (online) versus the sum of hourly averaged species (offline).</p>
</section>
<section id="f-3-prescribing-features-of-elmo-output-files">
<h2>F.3 Prescribing features of ELMO output files<a class="headerlink" href="#f-3-prescribing-features-of-elmo-output-files" title="Link to this heading">#</a></h2>
<p>The interface for prescribing ELMO file properties is located in the <a class="reference external" href="https://github.com/USEPA/CMAQ_Dev/blob/research/DOCS/Users_Guide/CMAQ_UG_ch04_model_inputs.md#miscctrl">CMAQ Miscellaneous Control File</a>. The following lines activate or deactivate instantaneous (CCTM_ELMO) and average (CCTM_AELMO) files, respectively:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">elmo_activate</span>
  <span class="n">instant</span> <span class="o">=</span> <span class="o">.</span><span class="n">FALSE</span><span class="o">.</span>
  <span class="n">average</span> <span class="o">=</span> <span class="o">.</span><span class="n">TRUE</span><span class="o">.</span>
<span class="o">/</span>
</pre></div>
</div>
<p>The layers to output for the instantaneous ELMO file can be modified with the Inst_Layer_Top and Inst_Layer_Bot variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">elmo_inst</span>
  <span class="n">Inst_Layer_Top</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="n">Inst_Layer_Bot</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="n">Inst_Vars_Nml</span> <span class="o">=</span> <span class="s1">&#39;DEFAULT&#39;</span> <span class="p">(</span><span class="n">See</span> <span class="n">section</span> <span class="n">G</span><span class="mf">.4</span><span class="p">)</span>
<span class="o">/</span>
</pre></div>
</div>
<p>Likewise, the average ELMO file output layers are set in the elmo_avrg variable section:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">elmo_avrg</span>
  <span class="n">Avrg_Layer_Top</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="n">Avrg_Layer_Bot</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="n">Avrg_Vars_Nml</span>  <span class="o">=</span> <span class="s1">&#39;DEFAULT&#39;</span> <span class="p">(</span><span class="n">See</span> <span class="n">section</span> <span class="n">G</span><span class="mf">.4</span><span class="p">)</span>
<span class="o">/</span>
</pre></div>
</div>
<p>Inst_Layer_Top and Avrg_Layer_Top may not exceed the total number of model layers.</p>
<p>It is recommended to output all model layers if you are outputting variables for comparison to satellite column data like NO2. Aerosol Optical Depth (AOD_550) may be output as a surface (i.e. just layer 1) or for multiple layers (layer-dependent extinction multiplied by layer thickness).
When 2D variables are output on a 3D ELMO file, ELMO will put real data in layer 1, and I/O-API missing values above layer 1.</p>
</section>
<section id="f-4-selecting-elmo-output-variables">
<h2>F.4 Selecting ELMO output variables<a class="headerlink" href="#f-4-selecting-elmo-output-variables" title="Link to this heading">#</a></h2>
<p>All CMAQ scalar variables and all variables in Fig. F-1 are available for output on ELMO files.
The <a class="reference external" href="https://github.com/USEPA/CMAQ_Dev/blob/research/DOCS/Users_Guide/CMAQ_UG_ch04_model_inputs.md#miscctrl">CMAQ Miscellaneous Control File</a> variables Inst_Vars_Nml and Avrg_Vars_Nml (shown in section F.3) control the variables output to the instantaneous and average ELMO files, respectively.
Up to 1000 strings may be specified here.
To avoid relying on intimidatingly long lists of variable names, ELMO uses Keywords that expand to groups of variables (often particularly meaningful or useful ones).
In this way, ELMO improves transparency and reduces the risk of needing to rerun simulations to produce mistakenly omitted variables.
The ELMO Keyword “DEFAULT” loads all scalar and aggregate variables that would have been generated by using the default COMBINE approach for CMAQv5.3.3 and previous.
This and other ELMO keywords are defined in Table F-1.</p>
<p>**Table F-1. Map of all ELMO Keywords to CMAQ species, ELMO variables, or other Keywords.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>ELMO Keyword</strong></p></th>
<th class="head"><p>Variables and/or <strong>Keywords</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>DEFAULT</strong></p></td>
<td><p><strong>AMET</strong>, <strong>CUTOFF_FRACTIONS</strong>, <strong>MASS</strong>, PM_NUM, PMF_NUM, PMC_NUM, <strong>MET</strong>, <strong>CHEM</strong>, <strong>FINE_SPECIES</strong>, <strong>COARSE_SPECIES</strong>, <strong>PM25_SPECIES</strong>, <strong>SIZE</strong>, <strong>AMS</strong>, <strong>PM25TO10_SPECIES</strong></p></td>
</tr>
<tr class="row-odd"><td><p><strong>AMET</strong></p></td>
<td><p>PMF_MASS, PMF_FRM, PMC_MASS, PMF_OC, PMF_EC, PMF_NA, PMF_CL, PMF_SO4, PMF_NO3, PMF_NH4, PM25, PM25_FRM, PM25_SO4, PM25_NO3, PM25_NH4, PM25_OC, PM25_EC, PMF_FE, PMF_AL, PMF_SI, PMF_TI, PMF_CA, PMF_MG, PMF_K, PMF_MN, PMF_SOILIMPV, PMF_UN_IMPV1, PMF_NCOM, PMF_UN_IMPV2, TNO3, PM_MASS, PMC_MASS, <strong>MET</strong>, Tsurf, AOD_550</p></td>
</tr>
<tr class="row-even"><td><p><strong>MASS</strong></p></td>
<td><p>PMF_MASS, PMC_MASS, PM01, PM1, PM25, PM10, PM25TO10, PMU_MASS, PMAMS, PMAIT_MASS, PMACC_MASS</p></td>
</tr>
<tr class="row-odd"><td><p><strong>NUMBER</strong></p></td>
<td><p>PM_NUM, PMF_NUM, PMC_NUM, N10, N20, N40, N100</p></td>
</tr>
<tr class="row-even"><td><p><strong>SIZE</strong></p></td>
<td><p><strong>NUMBER</strong>, DRY_DG<sup>#</sup>, WET_DG, STDEV, DRY_M3, WET_M3, WET_M2, DRY_DENS, WET_DENS</p></td>
</tr>
<tr class="row-odd"><td><p><strong>SURFACE</strong></p></td>
<td><p>PM_SRF, PMU_SRF, PMF_SRF, PMC_SRF, WET_M2</p></td>
</tr>
<tr class="row-even"><td><p><strong>ORGANIC</strong></p></td>
<td><p><strong>FINE_ORG</strong>, PM1_OC, PM1_OA, PMAMS_OA, PMAMS_OTOC, PM25_OA</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MET</strong></p></td>
<td><p>TA, PRES, RH</p></td>
</tr>
<tr class="row-even"><td><p><strong>CHEM</strong></p></td>
<td><p>GAMMA_N2O5, GAMMA_N2O5K, YIELD_CLNO2, YIELD_CLNO2K, GAMMA_IEPOX, K_IEPOX, GAMMA_IMAE</p></td>
</tr>
<tr class="row-odd"><td><p><strong>FINE_SPECIES</strong></p></td>
<td><p>PMF_SO4, PMF_NO3, PMF_NH4, PMF_CL, PMF_NA, PMF_EC, PMF_OC, PMF_OA, PMF_H2O, PMF_SOILIMPV, PMF_UN_IMPV1, PMF_UN_IMPV2, PMF_HP, PMF_HPMOLAL, PMF_PH, <strong>FINE_ORG</strong>, PMF_MASS</p></td>
</tr>
<tr class="row-even"><td><p><strong>COARSE_SPECIES</strong></p></td>
<td><p>PMC_MASS, PMC_SO4, PMC_NO3, PMC_NH4, PMC_NA, PMC_MG, PMC_K, PMC_CA</p></td>
</tr>
<tr class="row-odd"><td><p><strong>AMS_SPECIES</strong></p></td>
<td><p>PMAMS, PMAMS_SO4, PMAMS_NO3, PMAMS_NH4, PMAMS_CL, PMAMS_OA, PMAMS_OTOC</p></td>
</tr>
<tr class="row-even"><td><p><strong>PM1_SPECIES</strong></p></td>
<td><p>PM1, PM1_SO4, PM1_NO3, PM1_NH4, PM1_CL, PM1_NA, PM1_EC, PM1_OC, PM1_OA, PM1_MG, PM1_K, PM1_CA, PM1_OTHER, PM1_FE, PM1_SI, PM1_TI, PM1_MN, PM1_AL, PM1_SOIL, PM1_UNSP1, PM1_UNSPCRS</p></td>
</tr>
<tr class="row-odd"><td><p><strong>PM25_SPECIES</strong></p></td>
<td><p>PM25, PM25_SO4, PM25_No3, PM25_NH4, PM25_CL, PM25_NA, PM25_EC, PM25_OC, PM25_OA, PM25_MG, PM25_K, PM25_CA, PM25_OTHER, PM25_FE, PM25_SI, PM25_TI, PM25_MN, PM25_AL, PM25_SOIL, PM25_UNSP1, PM25_UNSPCRS, PM25_HP</p></td>
</tr>
<tr class="row-even"><td><p><strong>PM25TO10_SPECIES</strong></p></td>
<td><p>PM25TO10, PM25TO10_SO4, PM25TO10_NO3, PM25TO10_NH4, PM25TO10_CL, PM25TO10_NA</p></td>
</tr>
<tr class="row-odd"><td><p><strong>OPTICAL</strong></p></td>
<td><p>AOD_550, PM_EXT_550</p></td>
</tr>
<tr class="row-even"><td><p><strong>FINE_ORG</strong></p></td>
<td><p>PMF_POC, PMF_SOC, PMF_POA, PMF_SOA, PMF_NCOM, PMF_OMOC, PMF_OTOC, PMF_ASOA, PMF_BSOA, PMF_CLDGLY, PMF_ISOPSOA, PMF_IEPOXSOA, PMF_MTNSOA, PMF_MTSOA, PMF_OC, PMF_OA</p></td>
</tr>
<tr class="row-odd"><td><p><strong>CUTOFF_FRACTIONS</strong></p></td>
<td><p>FPM01, FPM1, FPM25, FPM10, FPM25TO10, FAMS</p></td>
</tr>
<tr class="row-even"><td><p><strong>TOXICS</strong></p></td>
<td><p>PM25_HDIESEL, PM25_HBE, PM25_HCD, PM25_HCR3, PM25_HCR6, PM25_HCR, PM25_HPB, PM25_HMN, PM25_HNI, PM25_HAS, PM25_HG, PM10_HDIESEL, PM10_HBE, PM10_HCD, PM10_HCR3, PM10_HCR6, PM10_HCR, PM10_HPB, PM10_HMN, PM10_HNI, PM10_HAS, PM10_HG</p></td>
</tr>
<tr class="row-odd"><td><p><strong>SIMPLE</strong></p></td>
<td><p>PM25, PM10</p></td>
</tr>
<tr class="row-even"><td><p><strong>AMS</strong></p></td>
<td><p>PMAMS_CL, PMAMS_NH4, PMAMS_NO3, PMAMS_OA, PMAMS_SO4</p></td>
</tr>
<tr class="row-odd"><td><p><strong>SAT</strong></p></td>
<td><p><strong>SATMET</strong>, <strong>SATCONC</strong></p></td>
</tr>
<tr class="row-even"><td><p><strong>SATMET</strong></p></td>
<td><p>DENS, DZ, ZH, CFRAC, PV, PRES, TA</p></td>
</tr>
<tr class="row-odd"><td><p><strong>SATCONC</strong></p></td>
<td><p>NO2, SO2, O3, CO, FORM, NH3, AOD_550</p></td>
</tr>
<tr class="row-even"><td><p><strong>ALLCONC</strong></p></td>
<td><p>All CMAQ Internal Species</p></td>
</tr>
</tbody>
</table>
</div>
<p><sub>#</sup>As noted for red variables in Fig. F-1, several variables are populated for each aerosol mode including diameters, standard deviation, and density, etc.</p>
<p>The ELMO variables are defined in <a class="reference download internal" download="" href="../../../_downloads/0ef4480aa96f206254d83dab908ab112/ELMO_DATA.F"><span class="xref download myst">ELMO_DATA.F</span></a>.
Before ELMO maps output variables to internal model species or meteorological inputs, ELMO recursively expands all Keywords to their members and then filters out duplicates. There is no disadvantage to specifying a variable twice in the CMAQ Control namelist.</p>
</section>
<section id="f-5-elmo-implementation-in-cmaq">
<h2>F.5 ELMO Implementation in CMAQ<a class="headerlink" href="#f-5-elmo-implementation-in-cmaq" title="Link to this heading">#</a></h2>
<p>ELMO works by putting all of the diagnostic parameters first on the ELMO_LIST table in ELMO_DATA.F. There is also a list of ID numbers (integers) above that table which allow for a comprehensive order to be preserved while the order of the parameters in the table and their calculations in ELMO_PROC.F are allowed to move in sequence. The subroutine LOAD_ELMO (ELMO_PROC.F) is called from DRIVER and cycles through the list of selected variables as defined by the interface in the CMAQ Miscellaneous Control file.</p>
<p>For each variable, the recursive subroutine CALC_ELMO is called to execute the calculation. For many of the calculations, all that is required is an assignment from an already existing diagnostic variable (e.g. RH, STDEV_ACC).
For the parameters which are linear combinations of CMAQ species or other parameters (e.g. fine-mode nitrate PMF_NO3 = ANO3I + ANO3J), they may be defined in the subroutine MAP_ELMO_COEFFS (in ELMO_PROC.F).
Follow the example of existing variables to prescribe the species to be added, the inlet type to assume for collection, etc. New PM inlet types can be added via the ELMO_INLET table in ELMO_DATA.F. For more complicated variables like fine-mode acidity (PMF_PH) or the PM25 mass collected by a Federal Reference Method sampler (PM25_FRM), calculations appear directly in CALC_ELMO. For example, PMF_MASS is computed by referencing the information in AERO_DATA to identify all variables that are included in fine-mode particulates (excluding ‘tracer’ species, which by definition, don’t contribute to the bulk particle mass in CMAQ). The following algorithm shows how the return variable, outval, is summed across all modes while neglecting aerosol inorganic and organic water.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> DO IMODE = 1,N_MODE
    IF ( AEROMODE( IMODE )%FINE_MASK ) THEN
         OUTVAL = OUTVAL + SUM( AEROSPC_CONC( :,IMODE ),
                  MASK=.NOT.AEROSPC(:)%TRACER)  - AEROSPC_CONC( AH2O_IDX,IMODE )
         IF ( AORGH2O_IDX .GT. 0 ) OUTVAL = OUTVAL
&amp;              - AEROSPC_CONC( AORGH2O_IDX,IMODE ) ! ug m-3
    END IF
 END DO
</pre></div>
</div>
<!-- BEGIN COMMENT -->
<p><a class="reference internal" href="CMAQ_UG_appendixE_configuring_WRF.html"><span class="std std-doc">&lt;&lt; Previous Appendix</span></a> - <a class="reference internal" href="../README.html"><span class="std std-doc">Home</span></a> <br>
CMAQv5.5 User’s Guide<br></p>
<!-- END COMMENT -->
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#f-1-output-concentration-and-diagnostic-variables">F.1 Output concentration and diagnostic variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#f-2-relationship-to-previous-cmaq-versions">F.2 Relationship to previous CMAQ versions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#f-3-prescribing-features-of-elmo-output-files">F.3 Prescribing features of ELMO output files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#f-4-selecting-elmo-output-variables">F.4 Selecting ELMO output variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#f-5-elmo-implementation-in-cmaq">F.5 ELMO Implementation in CMAQ</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/DOCS/Users_Guide/Appendix/CMAQ_UG_appendixF_elmo_output.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, CMAQ Developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>