
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Remove Uninitialized Variable in Column Model &#8212; CMAQ 5.5+ documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=eec9c716"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'DOCS/Release_Notes/CMAQ-Release-Notes:-Diagnostic-Options';</script>
    <link rel="canonical" href="https://jbrunto.github.io/CMAQ_Docs_v55/DOCS/Release_Notes/CMAQ-Release-Notes%3A-Diagnostic-Options.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/CMAQ_Logo_2_inch.png" class="logo__image only-light" alt="CMAQ 5.5+ documentation - Home"/>
    <img src="../../_static/CMAQ_Logo_2_inch.png" class="logo__image only-dark pst-js-only" alt="CMAQ 5.5+ documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../Users_Guide/README.html">
    CMAQ User’s Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../Users_Guide/Tutorials/README.html">
    CMAQ Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="README.html">
    Release Notes
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../Release_FAQ/README.html">
    FAQs
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/USEPA/CMAQ" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.epa.gov/cmaq" title="CMAQ - EPA Site" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/epa_seal_w-ring_RGB-sm.png" class="icon-link-image" alt="CMAQ - EPA Site"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://forum.cmascenter.org/" title="User Forum" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/cmas_logo.png" class="icon-link-image" alt="User Forum"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.epa.gov/cmaq/cracmm" title="CRACMM" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/CRACMM_1.png" class="icon-link-image" alt="CRACMM"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../Users_Guide/README.html">
    CMAQ User’s Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../Users_Guide/Tutorials/README.html">
    CMAQ Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="README.html">
    Release Notes
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../Release_FAQ/README.html">
    FAQs
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/USEPA/CMAQ" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.epa.gov/cmaq" title="CMAQ - EPA Site" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/epa_seal_w-ring_RGB-sm.png" class="icon-link-image" alt="CMAQ - EPA Site"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://forum.cmascenter.org/" title="User Forum" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/cmas_logo.png" class="icon-link-image" alt="User Forum"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.epa.gov/cmaq/cracmm" title="CRACMM" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/CRACMM_1.png" class="icon-link-image" alt="CRACMM"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Remove Uninitialized Variable in Column Model</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fix-bug-in-elmo-calculation-of-pmf-oc-pmf-ncom">Fix bug in ELMO calculation of PMF_OC, PMF_NCOM</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#correct-calculation-of-pm1-pm2-5-and-pm25to10-as-well-as-speciated-na-k-ca-and-mg-in-elmo">Correct calculation of PM1, PM2.5, and PM25to10 as well as speciated NA, K, CA, and MG in ELMO</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#accurate-output-of-gas-phase-species-in-mass-units">Accurate output of gas-phase species in mass units</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#restore-accurate-timestepping-when-running-with-temporally-finer-met-inputs">Restore accurate timestepping when running with temporally finer MET inputs</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-of-the-explicit-and-lumped-air-quality-model-output-module-elmo">Introduction of the Explicit and Lumped air quality Model Output module (ELMO)</a></li>
</ul>

  </nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Remove Uninitialized Variable in Column Model</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="remove-uninitialized-variable-in-column-model">
<h1>Remove Uninitialized Variable in Column Model<a class="headerlink" href="#remove-uninitialized-variable-in-column-model" title="Link to this heading">#</a></h1>
<p><a class="reference external" href="mailto:hutzell&#46;bill&#37;&#52;&#48;epa&#46;gov">William T<span>&#46;</span> Hutzell</a>, U.S. Environmental Protection Agency<br />
<strong>Type of update</strong>: Bug Fix<br />
<strong>Release Version/Date</strong>: CMAQv5.5</p>
<p><strong>Description</strong>: When the GRID_NAME sets the model domain to a column model, <em>i.e., NCOLS and NROWS equal one</em>. The model unpredictably crashes with the below error message.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> NCVGT: : NetCDF: Index exceeds dimension bound
    *** ERROR ABORT in subroutine retrieve_time_de on PE 000
    Could not extract MET_CRO_3D       file
 Abort(0) on node 0 (rank 0 in comm 0): application called MPI_Abort(MPI_COMM_WORLD, 0) - process 0
</pre></div>
</div>
<p>The error occurs because SDATE and STIME are uninitialized in sciproc.F and later used to interpolate the model grid’s Jacobian. Uninitialized SDATE and STIME may have values outside the period covered by the METCRO3D file so the time interpolation fails. The code fix moves setting SDATE and STIME above the IF ( .NOT. COLUMN_MODEL ) block in sciproc.F.</p>
<p><strong>Significance and Impact</strong>: Allows running CCTM for a column domain without unpredictable crashes. Using a column model can speed up developing code or debugging species name-lists and emissions control files.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Merge Commit</p></th>
<th class="head text-center"><p>Internal record</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ/commit/277c01c4b82b86a021949a72b3e387449cf68eda">Merge for PR#1072</a></p></td>
<td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ_Dev/pull/1072">PR#1072</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="fix-bug-in-elmo-calculation-of-pmf-oc-pmf-ncom">
<h1>Fix bug in ELMO calculation of PMF_OC, PMF_NCOM<a class="headerlink" href="#fix-bug-in-elmo-calculation-of-pmf-oc-pmf-ncom" title="Link to this heading">#</a></h1>
<p><a class="reference external" href="mailto:nolte&#46;chris&#37;&#52;&#48;epa&#46;gov">Chris Nolte</a>, U.S. Environmental Protection Agency<br />
<strong>Type of update</strong>: Bug Fix<br />
<strong>Release Version/Date</strong>: CMAQv5.5</p>
<p><strong>Description</strong>: This fixes a bug in the calculation of the ELMO parameter PMF_OC, which inadvertently subtracts off non-carbonaceous mass that should instead be skipped. Because PMF_NCOM is calculated using the value of PMF_OC, this bug affects PMF_NCOM as well.</p>
<p><strong>Significance and Impact</strong>: This change affects only PMF_OC and PMF_NCOM in the ELMO/AELMO outputs. There is no change in CONC/ACONC, CGRID, or deposition outputs. If using the default treatment of semivolatile organics, in which POC and PNCOM are mapped to VSVPO1, VSVPO2, VSVPO3, and VIVPO1 (see CMAQ_Control_DESID_<MECH>.nml), then the impact is minimal. However, if using the older method of treating POA as nonvolatile, with POC mapped to APOC and PNCOM mapped to APNCOM, then this bug has a significant impact on PMF_OC and PMF_NCOM.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Merge Commit</p></th>
<th class="head text-center"><p>Internal record</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ/commit/3857d63aa00c2fbdd8278ccedc2c4986acc24f0e">Merge for PR#1104</a></p></td>
<td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ_Dev/pull/1104">PR#1104</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="correct-calculation-of-pm1-pm2-5-and-pm25to10-as-well-as-speciated-na-k-ca-and-mg-in-elmo">
<h1>Correct calculation of PM1, PM2.5, and PM25to10 as well as speciated NA, K, CA, and MG in ELMO<a class="headerlink" href="#correct-calculation-of-pm1-pm2-5-and-pm25to10-as-well-as-speciated-na-k-ca-and-mg-in-elmo" title="Link to this heading">#</a></h1>
<p><a class="reference external" href="mailto:murphy&#46;ben&#37;&#52;&#48;epa&#46;gov">Ben Murphy</a>, U.S. Environmental Protection Agency<br />
<strong>Type of update</strong>: Bug Fix<br />
<strong>Release Version/Date</strong>: CMAQv5.5</p>
<p><strong>Description</strong>: The summations within ELMO for nonexplicit coarse-mode cations (NA, K, CA, and MG) into output aerosol variables with hard size cutoffs (PM1, PM25, and PM25to10) were incomplete.  This issue was identified on the CMAS User Forum <a class="reference external" href="https://forum.cmascenter.org/t/incorrect-pm25-na-calculation-in-the-elmo-module/4615">https://forum.cmascenter.org/t/incorrect-pm25-na-calculation-in-the-elmo-module/4615</a></p>
<p>A second correction also fixes a bug in the calculation of the ELMO parameter PM2.5 and PM2.5 species. To calculate the mass of particulate up to a hard size cutoff, the subroutine GET_AERO_INLET is called for each mode, with the second input parameter specifying the mode to be calculated. In CMAQv5.4, the variable IM was used, but the correct variable should be IMODE.</p>
<p><strong>Significance and Impact</strong>: This change is important for a complete representation of PM25 cations. Significant impacts on PM25_NA (~33%), PM25_CA (~16%), PM25_MG (~27%), and PM25_K (9%) in tests on the southeast US benchmark domain.</p>
<p><strong>PM<sub>2.5</sub> Sodium</strong>
<img alt="Murphy_PM_Sodium" src="https://github.com/user-attachments/assets/3281f30b-e914-4c5f-a8cc-da6ebb9b2282" /></p>
<p><strong>PM<sub>2.5</sub> Calcium</strong>
<img alt="Murphy_PM_Calcium" src="https://github.com/user-attachments/assets/02609bbb-d56c-4c2e-bda3-93da53e32fe3" /></p>
<p><strong>PM<sub>2.5</sub> Magnesium</strong>
<img alt="Murphy_PM_Magnesium" src="https://github.com/user-attachments/assets/a459a040-a2de-43b7-a981-41d8c314f2ea" /></p>
<p><strong>PM<sub>2.5</sub> Potassium</strong>
<img alt="Murphy_PM_K" src="https://github.com/user-attachments/assets/8f546043-686d-46ee-be8b-c023e2729d4e" /></p>
<p><strong>PM<sub>2.5-10</sub> Sodium</strong>
<img alt="Murphy_PM_Sodium_II" src="https://github.com/user-attachments/assets/5881c212-1206-4a41-ba0f-999bcaafaa93" /></p>
<p>The mode parameter fix for the calculation of mass with a hard diameter cut-off has important impacts on PM2.5 predictions across the model domain, and the specific impact depends on fraction of the total mass, or speciated mass, that is present in each of the Aitken, Accumulation and Coarse modes. The predictions for fine-mode particulate (PMF) are unaffected as the GET_AERO_INLET routine is not called for these cases.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Merge Commit</p></th>
<th class="head text-center"><p>Internal record</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ/commit/52a12a0ac08237a871998996873dd57486833891">Merge for PR#1078</a></p></td>
<td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ_Dev/pull/1078">PR#1078</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="accurate-output-of-gas-phase-species-in-mass-units">
<h1>Accurate output of gas-phase species in mass units<a class="headerlink" href="#accurate-output-of-gas-phase-species-in-mass-units" title="Link to this heading">#</a></h1>
<p><a class="reference external" href="mailto:murphy&#46;ben&#37;&#52;&#48;epa&#46;gov">Ben Murphy</a>, U.S. Environmental Protection Agency<br />
<strong>Type of update</strong>: Bug Fix<br />
<strong>Release Version/Date</strong>: CMAQv5.5</p>
<p><strong>Description</strong>: Although ELMO was correctly outputting gas species mixing ratios, ELMO had an error outputting these variables from the GC or NR lists if mass units were requested. This PR resolves the issue and adds the ability to output NH3 and HNO3 in mass units via ELMO.</p>
<p><strong>Significance and Impact</strong>: Gas-phase Benzo-a-pyrene was yielding garbage output from ELMO.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Merge Commit</p></th>
<th class="head text-center"><p>Internal record</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ/commit/f1d6b57dc10c2a02dffc60bd3ace522c40e677b6">Merge for PR#1008</a></p></td>
<td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ_Dev/pull/1008">PR#1008</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="restore-accurate-timestepping-when-running-with-temporally-finer-met-inputs">
<h1>Restore accurate timestepping when running with temporally finer MET inputs<a class="headerlink" href="#restore-accurate-timestepping-when-running-with-temporally-finer-met-inputs" title="Link to this heading">#</a></h1>
<p><a class="reference external" href="mailto:murphy&#46;ben&#37;&#52;&#48;epa&#46;gov">Ben Murphy</a>, U.S. Environmental Protection Agency<br />
<strong>Type of update</strong>: Bug Fix<br />
<strong>Release Version/Date</strong>: CMAQv5.5</p>
<p><strong>Description</strong>: ELMO gave erroneous results when run using met inputs not aligned with hour time steps such as seen when running WRF-CMAQ. See Issue <a class="reference external" href="https://github.com/USEPA/CMAQ/issues/179">179</a> in public repo.</p>
<p><strong>Significance and Impact</strong>: This model bug fix should be adopted as soon as possible for any user running WRF-CMAQ or using met inputs with time steps not aligned with hourly structure. Simulations for offline CMAQ with hourly met inputs are unaffected.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Merge Commit</p></th>
<th class="head text-center"><p>Internal record</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ/commit/a6e2bf20b774467fed85fc82eacd93ff57ef3434">Merge for PR#962</a></p></td>
<td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ_Dev/pull/962">PR#962</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="introduction-of-the-explicit-and-lumped-air-quality-model-output-module-elmo">
<h1>Introduction of the Explicit and Lumped air quality Model Output module (ELMO)<a class="headerlink" href="#introduction-of-the-explicit-and-lumped-air-quality-model-output-module-elmo" title="Link to this heading">#</a></h1>
<p><a class="reference external" href="mailto:murphy&#46;ben&#37;&#52;&#48;epa&#46;gov">Ben Murphy</a>, U.S. Environmental Protection Agency<br />
<strong>Type of update</strong>: New Feature<br />
<strong>Release Version/Date</strong>: CMAQv5.4</p>
<p><strong>Description</strong>:
The ELMO Synthesizer streamlines the definition, calculation, and maintenance of over 170 aggregate particulate matter parameters online in CMAQ. Previously, aggregate parameters like PM2.5 and Fine-mode Sulfate (ASO4I + ASO4J) were calculated through the COMBINE post-processing utility and documented via the SpecDef input file for that program. With ELMO, these variables are defined in ELMO_DATA.F and their calculations are prescribed in ELMO_PROC.F. Thus, CMAQ can now output higher-level parameters without needing to run any particular post-processing tool.</p>
<p>The interface for using ELMO is on the CMAQ Miscellaneous Control File. Please see that file for a description of how to use the options relevant for ELMO.</p>
<p>There are several distinct advantages to using ELMO over post-processing raw output with COMBINE:</p>
<ul class="simple">
<li><p>Definitions of parameters like PM2.5, PMF (Fine PM), and PM10.0 automatically adjust as PM species are activated or deactivated in CMAQ. There is no need to modify a SpecDef file to account for a new species.</p></li>
<li><p>Complex properties like O:C, OM:OC, particle acidity, etc. can be calculated using species properties available within CMAQ. This resolves a potential vulnerability where, for example, the OM:OC of organic species may become out of sync between the SpecDef and the SOA_DEFN table within the model. This could potentially lead to errors in the calculation of OC (organic carbon).</p></li>
<li><p>If a user is only interested in aggregate parameters like PM25 mass, they can avoid the I/O time and storage required saving the raw output of every PM variable and then processing with COMBINE. This can be particularly important when processing 3D data.</p></li>
<li><p>This functionality will be critical for applications like ISAM where there is a huge runtime and storage penalty for outputting raw species concentrations for every emission source.</p></li>
<li><p>New parameters are available that were not before like N10, N20, N40 and N100, the number of particles above 10, 20, 40 and 100 nm in diameter. AOD and extinction have also been supported as options.</p></li>
<li><p>Some time may be saved in the input/output of so many variables via COMBINE.</p></li>
</ul>
<p>Keywords are available (see the interface in the EmissionControlFile) to use a short cut for identifying the parameters of interest. Parameters may be added to the ELMO_LIST table in ELMO_DATA.F and then prescribed in ELMO_PROC.F with greater ease.</p>
<p>For developers: the new module works by putting all of the diagnostic parameters first on the ELMO_LIST table in ELMO_DATA.F. There is also a list of ID numbers (integers) above that table which allow for a master order to be preserved while the order of the parameters in the table and their calculations in ELMO_PROC.F are allowed to move in sequence. The subroutine LOAD_ELMO (ELMO_PROC.F) is called from AERO_DRIVER and cycles through the list of used parameters as defined by the interface in the EmissionControlFile.</p>
<p>For each parameter, the subroutine CALC_ELMO is called to lookup the calculation. For many of the calculations, all that is required is an assignment from an already existing diagnostic variable. For the parameters which are linear combinations of CMAQ species or other parameters (e.g. fine-mode nitrate PMF_NO3 = ANO3I + ANO3J, PM2.5 mass PM25 = PM25_SO4 + PM25_NO3 + PM25_NH4 + PM25_CL + PM25_NA + PM25_EC + PM25_POA + …), they may be defined in the subroutine MAP_ELMO_COEFF (in ELMO_PROC.F). Follow the guide of existing parameters to prescribe the species to be added, the inlet type to assume for collection, etc. If you need to add a new inlet description, you can do that in the ELMO_INLET table in ELMO_DATA.F. For more complicated variables like fine-mode acidity (PMF_PH) or the PM25 mass collected by a Federal Reference Method sampler (PM25_FRM), calculations appear directly in CALC_ELMO_DATA.</p>
<p><strong>Significance and Impact</strong>: There is no quantitative impact on results, but there will be a noticeable positive impact on the time invested in post-processing aggregate PM components and storage volumes required for standard runs. There can be some slight differences realized when one compares quantities averaged online vs. offline. For example, total PM2.5 have some small deviations when it is calculated as the hourly average of the sum of species (online) versus the sum of hourly averaged species (offline).</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Merge Commit</p></th>
<th class="head text-center"><p>Internal record</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ/commit/3dc2bb6e3d3041bbbf0729643cc38bb2c52b2e11">Merge for PR#639</a></p></td>
<td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ_Dev/pull/639">PR#639</a></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ/commit/6bf6a3c367cb5fae088396c879e1c9609766a5dd">Merge for PR#637</a></p></td>
<td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ_Dev/pull/637">PR#637</a></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ/commit/c5bce3ef77dc54b29bf66046d07f766afc2d9f61">Merge for PR#769</a></p></td>
<td class="text-center"><p><a class="reference external" href="https://github.com/USEPA/CMAQ_Dev/pull/769">PR#769</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>